/* NyanGrab.JS */
!function(a){"use strict";console.info("NyanGrab Loaded"),a.nyangrab=function(b,c){function f(b,c){var d={result:[]};return"[object Array]"===Object.prototype.toString.call(b)&&a.each(b,function(b,e){if(e.loop)a.each(a(c).find(e.selector),function(b){var c=a(this),f={};a.each(e.result,function(a,d){var e=c.find(d.find),g="";if("text"==d.grab.by?g=e.text():"html"==d.grab.by?g=e.html():"val"==d.grab.by?g=e.val():"attr"==d.grab.by&&(g=e.attr(d.grab.value)),null==d.replace&&void 0==d.replace||(g=h(g,d.replace[0],d.replace[1])),void 0!=d.format){var i;i=d.format.replace("{{index:num}}",b+1),i=i.replace("{{data}}",g),g=i}if(void 0!=d.grab.custom){"function"==typeof d.grab.custom&&(g=d.grab.custom(g))}f[d.name]=g}),d.result.push(f)});else{var f=a(c).find(e.selector+":eq(0)"),g={};a.each(e.result,function(b,c){var d=f.find(c.find),e="",i=[];if(c.loop?a.each(d,function(b){var d=a(this);if("text"==c.grab.by?e=d.text():"html"==c.grab.by?e=d.html():"val"==c.grab.by?e=qw.val():"attr"==c.grab.by&&(e=d.attr(c.grab.value)),null==c.replace&&void 0==c.replace||(e=h(e,c.replace[0],c.replace[1])),void 0!=c.format){var f;f=f.replace("{{data}}",e),f=c.format.replace("{{index:num}}",indexnum+1),e=f}if(void 0!=c.grab.custom){var g={};c.grab.custom&&"[object Function]"===g.toString.call(c.grab.custom)&&(e=c.grab.custom(e))}i.push(e),e=i}):"text"==c.grab.by?e=d.text():"val"==c.grab.by?e=qw.val():"html"==c.grab.by?e=d.html():"attr"==c.grab.by&&(e=d.attr(c.grab.value)),null==c.replace&&void 0==c.replace||(e=h(e,c.replace[0],c.replace[1])),void 0!=c.format){var j;j=j.replace("{{data}}",e),j=c.format.replace("{{index:num}}",indexnum+1),e=j}if(void 0!=c.grab.custom){var k={};c.grab.custom&&"[object Function]"===k.toString.call(c.grab.custom)&&(e=c.grab.custom(e))}g[c.name]=e}),d.result.push(g)}}),i("Preparing Output"),d}function g(b){i("Cleaning Response");var c=a("<div>"+b+"</div>");return c.find("style").remove(),c.find("script").remove(),c.find("iframe").remove(),c.find("embed").remove(),c.html()}function h(a,b,c){return a.replace(new RegExp(b,"g"),c)}function i(a){e.isDebug&&console.info(Date()+" - "+a)}var e={isDebug:!1};i("Getting Content"),a.each(b,function(d,e){var h="";a.ajax({url:"https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select content from data.headers where url="'+e.url+'"')+"&format=xml&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",async:!0}).done(function(d){i("Prosessing Response");var e=a(d).find("content").text();h=g(e),c(f(b,h))})})}}(jQuery);
